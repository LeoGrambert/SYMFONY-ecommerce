<?php

namespace LG\CoreBundle\Repository;

/**
 * BookingRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class BookingRepository extends \Doctrine\ORM\EntityRepository
{
    /**
     * With this function, we can get all booking dates from today
     * @return array
     */
    public function findByDateReservation()
    {
        $dayYesterday = date('d') - 1;
        $month = date('m');
        $year = date('Y');
        $currentDate = $year.$month.$dayYesterday;
        
        $qd = $this->createQueryBuilder('b');
        
        $qd
            ->select('b')
            ->where('b.dateReservation > :currentDate')->setParameter('currentDate', $currentDate);
        
        return $qd->getQuery()->getResult();
    }
}
